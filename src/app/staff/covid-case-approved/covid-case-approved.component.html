<nav class="breadcrumb">
  <!-- <a class="breadcrumb-item" href="javascript://" routerLink="/staff/requisition-supplies">การใช้เวชภัณฑ์</a> -->
  <span class="breadcrumb-item active">จ่ายยาและเวชภัณฑ์ให้รพ.ลูกข่าย</span>
</nav>
<div class="clr-row">
  <div class="clr-col-6"></div>
  <div class="clr-col-3">
    <div style="padding-top: 0.2rem;">
      <h4>{{reqCode}}</h4>
    </div>
  </div>
  <div class="clr-col-3">
    <button class="btn btn-lg btn-success" (click)="approved()" style="float: right;">จ่ายของ</button>
  </div>
</div>
<div class="clr-row">
  <div class="clr-col-3">
    <clr-datagrid [clrDgLoading]="isLoading">
      <clr-dg-column>โรงพยาบาลลูกข่าย</clr-dg-column>

      <clr-dg-row *ngFor="let l of list; let idx=index;" (click)="onClickRow(l)" [ngClass]="{ 'isSuccess': l.hospital_id_client == hospIdClient }">
        <clr-dg-cell>{{l.hospname}}</clr-dg-cell>
      </clr-dg-row>
    </clr-datagrid>
  </div>
  <div class="clr-col-3">
    <clr-datagrid [clrDgLoading]="isLoading" [(clrDgSelected)]="selected" (clrDgSelectedChange)="onClickRowDetail($event)">
      <clr-dg-column>เลขที่ใบเบิก</clr-dg-column>
      <clr-dg-column>วันที่เบิก</clr-dg-column>

      <clr-dg-row *clrDgItems="let l of details; let idx=index;" (click)="onClickDetail(l)" [clrDgItem]="l">
        <clr-dg-cell>{{l.code}}</clr-dg-cell>
        <clr-dg-cell>{{l.create_date | dateTh:'DD/MM/YYYY hh:mm'}}</clr-dg-cell>
      </clr-dg-row>
    </clr-datagrid>
  </div>
  <div class="clr-col-3">
    <clr-datagrid [clrDgLoading]="isLoading">
      <clr-dg-column>รายการ</clr-dg-column>
      <clr-dg-column></clr-dg-column>

      <clr-dg-row *ngFor="let l of drugs; let idx=index;">
        <clr-dg-cell>{{l.name}}</clr-dg-cell>
        <clr-dg-cell>{{l.qty}} {{l.unit_name}}</clr-dg-cell>
      </clr-dg-row>
    </clr-datagrid>
  </div>
  <div class="clr-col-3">
    <clr-datagrid [clrDgLoading]="isLoading">
      <clr-dg-column>รายการ</clr-dg-column>
      <clr-dg-column>จำนวนเบิกรวม</clr-dg-column>
      <clr-dg-column>Stock คงเหลือ</clr-dg-column>

      <clr-dg-row *ngFor="let l of drugStock; let idx=index;" [ngClass]="{ 'isError': l.requisition_qty > stock_qty }">
        <clr-dg-cell>{{l.name}}</clr-dg-cell>
        <clr-dg-cell>{{l.requisition_qty}} {{l.unit_name}}</clr-dg-cell>
        <clr-dg-cell>{{l.stock_qty}} {{l.unit_name}}</clr-dg-cell>
      </clr-dg-row>
    </clr-datagrid>
  </div>
</div>